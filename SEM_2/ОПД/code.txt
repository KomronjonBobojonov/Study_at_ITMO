ORG 0x58F
START: CLA

LINE_LENGTH_OUT: IN 3
AND #0x40
BEQ LINE_LENGTH_OUT
LD (LENGTH_ADDR)
OUT 2

FIRST_OUT: IN 3
AND #0x40
BEQ FIRST_OUT
LD (LINE_ADDR)+
SWAB
OUT 2
SWAB
ST RES
LD (LENGTH_ADDR)
DEC
CMP 0x0
BEQ EXIT
ST (LENGTH_ADDR)
SECOND_OUT: IN 3
AND #0x40
BEQ SECOND_OUT
LD RES
OUT 2
CLA
LOOP (LENGTH_ADDR)
JUMP FIRST_OUT
HLT
EXIT: HLT

LENGTH_ADDR: WORD 0x5F3
LINE_ADDR: WORD 0x5F4
RES: WORD ?

ORG 0x5F3
WORD 0x0005
WORD 0xC4B0
WORD 0xB7B0
WORD 0xBD00

